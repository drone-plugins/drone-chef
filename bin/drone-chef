#!/usr/bin/env ruby

$LOAD_PATH.push File.expand_path("../../lib", __FILE__)

Signal.trap("INT") do
  abort
end

begin
  require "drone/plugin"
  require "drone/chef"
rescue LoadError
  require "rubygems"
  require "drone/plugin"
  require "drone/chef"
end

begin
  Drone::Plugin.new(STDIN) do |payload|
    Drone::Chef.new(
      payload
    ).execute!
  end
rescue Interrupt
  abort "Quitting..."
end
